apiVersion: promptkit.altairalabs.ai/v1alpha1
kind: Scenario
metadata:
  name: account-info
spec:
  description: "Customer asking about their account details"
  task_type: "customer-support"
  
  turns:
    - role: "user"
      content: "Can you tell me when my subscription renews? My email is mary.wilson@email.com"
      assertions:
        - type: tools_called
          params:
            tools: ["get_customer_info", "check_subscription_status"]
            message: "Should use get_customer_info and check_subscription_status tools to look up account details"
        - type: content_includes
          params:
            patterns: ["subscription", "renewal", "check", "account"]
            message: "Should acknowledge subscription inquiry and indicate checking account"
      
      # Expected: Agent should use get_customer_info and check_subscription_status tools
      
    - role: "user"
      content: "Also, what plan am I on currently?"
      assertions:
        - type: content_includes
          params:
            patterns: ["plan", "currently", "subscription"]
            message: "Should provide information about current plan based on previous tool calls"
        - type: content_matches
          params:
            pattern: "(?i)(Premium|Basic|Pro|Standard|plan|subscription)"
            message: "Should reference specific subscription plan information"
      
      # Expected: Agent should reference subscription_status from previous tool call
