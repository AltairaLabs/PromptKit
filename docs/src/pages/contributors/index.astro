---
import { getCollection } from 'astro:content';
import DocsLayout from '../../layouts/DocsLayout.astro';
import Sidebar from '../../components/Sidebar.astro';

const contributorsIndex = await getCollection('contributors', ({ id }) => id === 'index.md' || id === 'index');
const indexEntry = contributorsIndex[0];

let title = 'Contributors';
let description = 'Contributing to PromptKit';
let Content;

if (indexEntry) {
  const rendered = await indexEntry.render();
  Content = rendered.Content;
  title = indexEntry.data.title || title;
  description = indexEntry.data.description || description;
}
---

<DocsLayout 
  title={title}
  description={description}
>
  <Sidebar slot="sidebar" product="contributors" currentPath={Astro.url.pathname} />
  
  {Content ? <Content /> : (
    <div>
      <h1>ü§ù {title}</h1>
      <p class="lead">{description}</p>
      <p>Welcome to the Contributors section.</p>
      <p>Select a topic from the sidebar to get started.</p>
    </div>
  )}
</DocsLayout>

<style>
  .lead {
    font-size: 1.25rem;
    margin-bottom: 2rem;
    color: #57606a;
  }

  @media (prefers-color-scheme: dark) {
    .lead {
      color: #8b949e;
    }
  }
</style>
